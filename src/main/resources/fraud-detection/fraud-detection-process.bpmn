<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.43.1" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.9.0">
  <bpmn:process id="fraud-detection-process" name="Fraud Detection Process" isExecutable="true">
    <bpmn:adHocSubProcess id="Fraud_Detection_Agent" name="Fraud Detection Agent" zeebe:modelerTemplate="io.camunda.connectors.agenticai.aiagent.jobworker.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNBNTZFRkYiLz4KPG1hc2sgaWQ9InBhdGgtMi1vdXRzaWRlLTFfMTg1XzYiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjQiIHk9IjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iYmxhY2siPgo8cmVjdCBmaWxsPSJ3aGl0ZSIgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIvPgo8L21hc2s+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIgZmlsbD0id2hpdGUiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4wMTA1IDEyLjA5ODdDMTguNDkgMTAuNTg5NCAxNy4xNTk0IDguMTA4MTQgMTYuMTc5OSA2LjAxMTAzQzE2LjE1MiA2LjAwNDUxIDE2LjExNzYgNiAxNi4wNzk0IDZDMTYuMDQxMSA2IDE2LjAwNjYgNi4wMDQ1MSAxNS45Nzg4IDYuMDExMDRDMTQuOTk5NCA4LjEwODE0IDEzLjY2OTcgMTAuNTg4OSAxMi4xNDgxIDEyLjA5ODFDMTAuNjI2OSAxMy42MDcxIDguMTI1NjggMTQuOTI2NCA2LjAxMTU3IDE1Ljg5ODFDNi4wMDQ3NCAxNS45MjYxIDYgMTUuOTYxMSA2IDE2QzYgMTYuMDM4NyA2LjAwNDY4IDE2LjA3MzYgNi4wMTE0NCAxNi4xMDE0QzguMTI1MTkgMTcuMDcyOSAxMC42MjYyIDE4LjM5MTkgMTIuMTQ3NyAxOS45MDE2QzEzLjY2OTcgMjEuNDEwNyAxNC45OTk2IDIzLjg5MiAxNS45NzkxIDI1Ljk4OUMxNi4wMDY4IDI1Ljk5NTYgMTYuMDQxMSAyNiAxNi4wNzkzIDI2QzE2LjExNzUgMjYgMTYuMTUxOSAyNS45OTU0IDE2LjE3OTYgMjUuOTg5QzE3LjE1OTEgMjMuODkyIDE4LjQ4ODggMjEuNDExIDIwLjAwOTkgMTkuOTAyMU0yMC4wMDk5IDE5LjkwMjFDMjEuNTI1MyAxOC4zOTg3IDIzLjk0NjUgMTcuMDY2OSAyNS45OTE1IDE2LjA4MjRDMjUuOTk2NSAxNi4wNTkzIDI2IDE2LjAzMSAyNiAxNS45OTk3QzI2IDE1Ljk2ODQgMjUuOTk2NSAxNS45NDAzIDI1Ljk5MTUgMTUuOTE3MUMyMy45NDc0IDE0LjkzMjcgMjEuNTI1OSAxMy42MDEgMjAuMDEwNSAxMi4wOTg3IiBzdHJva2U9IiM0OTFEOEIiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgbWFzaz0idXJsKCNwYXRoLTItb3V0c2lkZS0xXzE4NV82KSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:adHoc outputCollection="toolCallResults" outputElement="={&#10;  id: toolCall._meta.id,&#10;  name: toolCall._meta.name,&#10;  content: toolCallResult&#10;}" />
        <zeebe:ioMapping>
          <zeebe:input source="bedrock" target="provider.type" />
          <zeebe:input source="eu-central-1" target="provider.bedrock.region" />
          <zeebe:input source="credentials" target="provider.bedrock.authentication.type" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_ACCESS_KEY}}" target="provider.bedrock.authentication.accessKey" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_SECRET_KEY}}" target="provider.bedrock.authentication.secretKey" />
          <zeebe:input source="eu.anthropic.claude-sonnet-4-5-20250929-v1:0" target="provider.bedrock.model.model" />
          <zeebe:input source="=&#34;You are a fraud detection agent which needs to decide if a tax submission is fraud or not. You can decide on fraud right away and you can use a set of provided tools to gain more knowledge. &#10;&#10;You will receive the initial tax submission in &#60;taxSubmission&#62; tags and a follow up process might make suggestions on your decision which you should incorporate. If you detect a submission to be wildly wrong or a joke submission, directly flag it as fraud using the provided tool.&#10;&#10;You can call the same tool multiple times by providing different input values. Don&#39;t guess any tools which were not explicitely configured. If no tool matches the request, try to generate an answer. If you&#39;re not able to find a good answer, return with a message stating why you&#39;re not able to.&#10;&#10;Thinking, step by step, before you execute your tools, you think using the template `&#60;thinking&#62;&#60;context&#62;&#60;/context&#62;&#60;reflection&#62;&#60;/reflection&#62;&#60;/thinking&#62;`. When you are able to come to a decision, return it in a `&#60;fraudDecision&#62;&#60;fraud&#62;true|false&#60;/fraud&#62;&#60;verdict&#62;&#60;/verdict&#62;&#60;/fraudDecision&#62;` structure.&#10;&#10;The current date and time is: &#34; + now()" target="data.systemPrompt.prompt" />
          <zeebe:input source="=if (is defined(finalCheck)) then&#10;  finalCheck&#10;else &#34;&#60;taxSubmission&#62;&#34; + string(taxSubmission) + &#34;&#60;/taxSubmission&#62;&#34;" target="data.userPrompt.prompt" />
          <zeebe:input source="=agent.context" target="agentContext" />
          <zeebe:input source="in-process" target="data.memory.storage.type" />
          <zeebe:input source="=20" target="data.memory.contextWindowSize" />
          <zeebe:input source="=20" target="data.limits.maxModelCalls" />
          <zeebe:input source="WAIT_FOR_TOOL_CALL_RESULTS" target="data.events.behavior" />
          <zeebe:input source="text" target="data.response.format.type" />
          <zeebe:input source="=false" target="data.response.format.parseJson" />
          <zeebe:input source="=false" target="data.response.includeAssistantMessage" />
          <zeebe:input source="=true" target="data.response.includeAgentContext" />
          <zeebe:output source="=agent" target="agent" />
        </zeebe:ioMapping>
        <zeebe:taskDefinition type="io.camunda.agenticai:aiagent-job-worker:1" retries="3" />
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="6" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.agenticai.aiagent.jobworker.v1" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0zcblag</bpmn:incoming>
      <bpmn:outgoing>Flow_14fd7ee</bpmn:outgoing>
      <bpmn:userTask id="CallOnExternalAdvisor" name="Call On External Advisor">
        <bpmn:documentation>Ask a human expert to assist in the fraud detection.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:userTask />
          <zeebe:formDefinition formId="fraud-detection-process-view-tax-details" />
          <zeebe:ioMapping>
            <zeebe:input source="=fromAi(toolCall.taxSubmission, &#34;Summarize the tax submission which was provided by the user&#34;)" target="taxSubmission" />
            <zeebe:input source="=fromAi(toolCall.tendency, &#34;Share youre thoughts and tendency if this is fraud or not. This should help the expert getting a conclusion.&#34;)" target="tendency" />
            <zeebe:input source="=fromAi(toolCall.suspiciousParts, &#34;Parts of the tax submission you think are suspicious&#34;)" target="suspiciousParts" />
            <zeebe:output source="={&#10;  fraudDetected: fraudDetected,&#10;  expertAnalysis: expertAnalysis&#10;}" target="toolCallResult" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_02dr109</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_02dr109" sourceRef="CallOnExternalAdvisor" targetRef="Gateway_04sl072" />
      <bpmn:exclusiveGateway id="Gateway_04sl072" name="Is Fraud Detected?" default="Flow_1y3onm8">
        <bpmn:incoming>Flow_02dr109</bpmn:incoming>
        <bpmn:outgoing>Flow_1ex155v</bpmn:outgoing>
        <bpmn:outgoing>Flow_1y3onm8</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1y3onm8" name="No" sourceRef="Gateway_04sl072" targetRef="Event_0ut60ps" />
      <bpmn:intermediateThrowEvent id="Event_0ut60ps" name="No Fraud!">
        <bpmn:extensionElements />
        <bpmn:incoming>Flow_1y3onm8</bpmn:incoming>
      </bpmn:intermediateThrowEvent>
      <bpmn:intermediateThrowEvent id="Event_0gnk722" name="Throw Fraud">
        <bpmn:extensionElements>
          <zeebe:ioMapping>
            <zeebe:output source="=toolCallResult.expertAnalysis" target="expertAnalysis" />
            <zeebe:output source="=agentAnalysis" target="agentAnalysis" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1ex155v</bpmn:incoming>
        <bpmn:incoming>Flow_16beu1m</bpmn:incoming>
        <bpmn:escalationEventDefinition id="EscalationEventDefinition_1a0n3ld" escalationRef="Escalation_3eekq60" />
      </bpmn:intermediateThrowEvent>
      <bpmn:sequenceFlow id="Flow_1ex155v" name="Yes" sourceRef="Gateway_04sl072" targetRef="Event_0gnk722">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=toolCallResult.fraudDetected</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:scriptTask id="FraudDetected" name="Fraud! Detected">
        <bpmn:documentation>Use this tool to mark the submission as definitely being fraud.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:script expression="=agentAnalysis" resultVariable="agentAnalysis" />
          <zeebe:ioMapping>
            <zeebe:input source="=fromAi(toolCall.agentAnalysis, &#34;Final analysis why the submission is definitely fraud&#34;)" target="agentAnalysis" />
            <zeebe:output source="=true" target="fraudDetected" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_16beu1m</bpmn:outgoing>
      </bpmn:scriptTask>
      <bpmn:sequenceFlow id="Flow_16beu1m" sourceRef="FraudDetected" targetRef="Event_0gnk722" />
      <bpmn:serviceTask id="Activity_1yge9uw" name="Send inquiry e-mail" zeebe:modelerTemplate="io.camunda.connectors.email.v1" zeebe:modelerTemplateVersion="4" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzkwXzI0MjApIj4KPHBhdGggZD0iTTguMzM4MzUgOS45NTM2NUwxMC4zODk0IDEyLjAxMDRMOC4zMzI2MiAxNC4wNjcyTDkuMTQ2MTYgMTQuODc1TDEyLjAxMDcgMTIuMDEwNEw5LjE0NjE2IDkuMTQ1ODNMOC4zMzgzNSA5Ljk1MzY1WiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTEyLjM0ODggOS45NTM2NUwxNC4zOTk4IDEyLjAxMDRMMTIuMzQzIDE0LjA2NzJMMTMuMTU2NiAxNC44NzVMMTYuMDIxMiAxMi4wMTA0TDEzLjE1NjYgOS4xNDU4M0wxMi4zNDg4IDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMy45NzIgMTEuNDM3NUgxLjEyNTMzVjIuNzkyMTlMNy42NzM3NiA3LjMyMzk2QzcuNzY5NjcgNy4zOTA0OSA3Ljg4MzYgNy40MjYxNCA4LjAwMDMyIDcuNDI2MTRDOC4xMTcwNSA3LjQyNjE0IDguMjMwOTggNy4zOTA0OSA4LjMyNjg5IDcuMzIzOTZMMTQuODc1MyAyLjc5MjE5VjhIMTYuMDIxMlYyLjI3MDgzQzE2LjAyMTIgMS45NjY5NCAxNS45MDA0IDEuNjc1NDkgMTUuNjg1NiAxLjQ2MDYxQzE1LjQ3MDcgMS4yNDU3MiAxNS4xNzkyIDEuMTI1IDE0Ljg3NTMgMS4xMjVIMS4xMjUzM0MwLjgyMTQzMiAxLjEyNSAwLjUyOTk4NCAxLjI0NTcyIDAuMzE1MDk5IDEuNDYwNjFDMC4xMDAyMTQgMS42NzU0OSAtMC4wMjA1MDc4IDEuOTY2OTQgLTAuMDIwNTA3OCAyLjI3MDgzVjExLjQzNzVDLTAuMDIwNTA3OCAxMS43NDE0IDAuMTAwMjE0IDEyLjAzMjggMC4zMTUwOTkgMTIuMjQ3N0MwLjUyOTk4NCAxMi40NjI2IDAuODIxNDMyIDEyLjU4MzMgMS4xMjUzMyAxMi41ODMzSDMuOTcyVjExLjQzNzVaTTEzLjYxNDkgMi4yNzA4M0w4LjAwMDMyIDYuMTU1MjFMMi4zODU3NCAyLjI3MDgzSDEzLjYxNDlaIiBmaWxsPSIjRkM1RDBEIi8+CjxwYXRoIGQ9Ik00LjI4MjEgOS45NTM2NUw2LjMzMzE0IDEyLjAxMDRMNC4yNzYzNyAxNC4wNjcyTDUuMDg5OTEgMTQuODc1TDcuOTU0NDkgMTIuMDEwNEw1LjA4OTkxIDkuMTQ1ODNMNC4yODIxIDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzkwXzI0MjAiPgo8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==">
        <bpmn:documentation>Send an inquiry email to the user for clarifications.</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:email:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="simple" target="authentication.type" />
            <zeebe:input source="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_USERNAME}}" target="authentication.username" />
            <zeebe:input source="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_PASSWORD}}" target="authentication.password" />
            <zeebe:input source="smtp" target="protocol" />
            <zeebe:input source="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_SMPT_HOST}}" target="data.smtpConfig.smtpHost" />
            <zeebe:input source="=3025" target="data.smtpConfig.smtpPort" />
            <zeebe:input source="NONE" target="data.smtpConfig.smtpCryptographicProtocol" />
            <zeebe:input source="sendEmailSmtp" target="data.smtpActionDiscriminator" />
            <zeebe:input source="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_ADDRESS}}" target="data.smtpAction.from" />
            <zeebe:input source="=taxSubmission.emailAddress" target="data.smtpAction.to" />
            <zeebe:input source="Tax Return Inquiry" target="data.smtpAction.subject" />
            <zeebe:input source="PLAIN" target="data.smtpAction.contentType" />
            <zeebe:input source="=fromAi(toolCall.emailBody, &#34;Generate an email body for an inquiry to a user who submitted a tax form and where more clarification is needed. Generate a polite e-mail text asking for the needed information. Summarize the tax submission which was provided by the user. Outline the parts of the tax submission need clarification. Make sure to insist in case the user did not provide the right information.&#34;)" target="data.smtpAction.body" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="elementTemplateVersion" value="4" />
            <zeebe:header key="elementTemplateId" value="io.camunda.connectors.email.v1" />
            <zeebe:header key="resultVariable" value="emailSent" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0uz92it</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_0uz92it" sourceRef="Activity_1yge9uw" targetRef="Event_1gwy74w" />
      <bpmn:intermediateCatchEvent id="Event_1gwy74w" name="User response received" zeebe:modelerTemplate="io.camunda.connectors.inbound.EmailIntermediate.v1" zeebe:modelerTemplateVersion="2" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzkwXzI0MjApIj4KPHBhdGggZD0iTTguMzM4MzUgOS45NTM2NUwxMC4zODk0IDEyLjAxMDRMOC4zMzI2MiAxNC4wNjcyTDkuMTQ2MTYgMTQuODc1TDEyLjAxMDcgMTIuMDEwNEw5LjE0NjE2IDkuMTQ1ODNMOC4zMzgzNSA5Ljk1MzY1WiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTEyLjM0ODggOS45NTM2NUwxNC4zOTk4IDEyLjAxMDRMMTIuMzQzIDE0LjA2NzJMMTMuMTU2NiAxNC44NzVMMTYuMDIxMiAxMi4wMTA0TDEzLjE1NjYgOS4xNDU4M0wxMi4zNDg4IDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMy45NzIgMTEuNDM3NUgxLjEyNTMzVjIuNzkyMTlMNy42NzM3NiA3LjMyMzk2QzcuNzY5NjcgNy4zOTA0OSA3Ljg4MzYgNy40MjYxNCA4LjAwMDMyIDcuNDI2MTRDOC4xMTcwNSA3LjQyNjE0IDguMjMwOTggNy4zOTA0OSA4LjMyNjg5IDcuMzIzOTZMMTQuODc1MyAyLjc5MjE5VjhIMTYuMDIxMlYyLjI3MDgzQzE2LjAyMTIgMS45NjY5NCAxNS45MDA0IDEuNjc1NDkgMTUuNjg1NiAxLjQ2MDYxQzE1LjQ3MDcgMS4yNDU3MiAxNS4xNzkyIDEuMTI1IDE0Ljg3NTMgMS4xMjVIMS4xMjUzM0MwLjgyMTQzMiAxLjEyNSAwLjUyOTk4NCAxLjI0NTcyIDAuMzE1MDk5IDEuNDYwNjFDMC4xMDAyMTQgMS42NzU0OSAtMC4wMjA1MDc4IDEuOTY2OTQgLTAuMDIwNTA3OCAyLjI3MDgzVjExLjQzNzVDLTAuMDIwNTA3OCAxMS43NDE0IDAuMTAwMjE0IDEyLjAzMjggMC4zMTUwOTkgMTIuMjQ3N0MwLjUyOTk4NCAxMi40NjI2IDAuODIxNDMyIDEyLjU4MzMgMS4xMjUzMyAxMi41ODMzSDMuOTcyVjExLjQzNzVaTTEzLjYxNDkgMi4yNzA4M0w4LjAwMDMyIDYuMTU1MjFMMi4zODU3NCAyLjI3MDgzSDEzLjYxNDlaIiBmaWxsPSIjRkM1RDBEIi8+CjxwYXRoIGQ9Ik00LjI4MjEgOS45NTM2NUw2LjMzMzE0IDEyLjAxMDRMNC4yNzYzNyAxNC4wNjcyTDUuMDg5OTEgMTQuODc1TDcuOTU0NDkgMTIuMDEwNEw1LjA4OTkxIDkuMTQ1ODNMNC4yODIxIDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzkwXzI0MjAiPgo8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==">
        <bpmn:extensionElements>
          <zeebe:properties>
            <zeebe:property name="inbound.type" value="io.camunda:connector-email-inbound:1" />
            <zeebe:property name="authentication.type" value="simple" />
            <zeebe:property name="authentication.username" value="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_USERNAME}}" />
            <zeebe:property name="authentication.password" value="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_PASSWORD}}" />
            <zeebe:property name="data.imapConfig.imapHost" value="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_IMAP_HOST}}" />
            <zeebe:property name="data.imapConfig.imapPort" value="{{secrets.CAMUNDA_SAMPLE_AGENT_EMAIL_IMAP_PORT}}" />
            <zeebe:property name="data.imapConfig.imapCryptographicProtocol" value="NONE" />
            <zeebe:property name="data.pollingWaitTime" value="PT10S" />
            <zeebe:property name="data.pollingConfigDiscriminator" value="unseenPollingConfig" />
            <zeebe:property name="data.pollingConfig.handlingStrategy" value="READ" />
            <zeebe:property name="activationCondition" value="=not(is empty(headers[key = &#34;In-Reply-To&#34;]))" />
            <zeebe:property name="consumeUnmatchedEvents" value="false" />
            <zeebe:property name="correlationKeyExpression" value="=headers[key = &#34;In-Reply-To&#34;][1].value" />
            <zeebe:property name="deduplicationModeManualFlag" value="true" />
            <zeebe:property name="deduplicationId" value="sample-agent-reply-to-emails" />
            <zeebe:property name="deduplicationMode" value="MANUAL" />
            <zeebe:property name="resultVariable" value="" />
            <zeebe:property name="resultExpression" value="={&#10;  toolCallResult: plainTextBody&#10;}" />
          </zeebe:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0uz92it</bpmn:incoming>
        <bpmn:messageEventDefinition id="MessageEventDefinition_1g7ney4" messageRef="Message_10q7s3s" />
      </bpmn:intermediateCatchEvent>
    </bpmn:adHocSubProcess>
    <bpmn:exclusiveGateway id="Gateway_0y12zon" name="Detection results confirmed?" default="Flow_1yea5o1">
      <bpmn:incoming>Flow_0nriff3</bpmn:incoming>
      <bpmn:outgoing>Flow_1dqcrtw</bpmn:outgoing>
      <bpmn:outgoing>Flow_1yea5o1</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:startEvent id="StartEvent_1" name="Enter Details of Tax">
      <bpmn:extensionElements>
        <zeebe:formDefinition formId="fraud-detection-process-enter-tax-form" />
        <zeebe:properties>
          <zeebe:property name="camundaModeler:exampleOutputJson" value="{&#34;taxSubmission&#34;: {&#34;fullName&#34;:&#34;John Smith&#34;,&#34;dob&#34;:&#34;1980-04-05&#34;,&#34;emailAddress&#34;:&#34;johnny.s@gmail.com&#34;,&#34;totalIncome&#34;:70000,&#34;totalExpenses&#34;:3500,&#34;largePurchases&#34;:[&#34;stocks&#34;],&#34;charitableDonations&#34;:&#34;I gave 5â‚¬ to a homeless man.&#34;}}" />
        </zeebe:properties>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0ifqrnr</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0ifqrnr" sourceRef="StartEvent_1" targetRef="Gateway_0cttbk8" />
    <bpmn:sequenceFlow id="Flow_0nriff3" sourceRef="Activity_19avfq6" targetRef="Gateway_0y12zon" />
    <bpmn:sequenceFlow id="Flow_0udscr6" sourceRef="Event_01me1b4" targetRef="Activity_0o48wy2" />
    <bpmn:endEvent id="Event_1sxkleb" name="Fraud is detected">
      <bpmn:incoming>Flow_1b97szc</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_0cttbk8">
      <bpmn:incoming>Flow_1yea5o1</bpmn:incoming>
      <bpmn:incoming>Flow_0ifqrnr</bpmn:incoming>
      <bpmn:outgoing>Flow_0zcblag</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1yea5o1" name="No" sourceRef="Gateway_0y12zon" targetRef="Gateway_0cttbk8" />
    <bpmn:endEvent id="Event_0vgcvn8" name="No Fraud Detected">
      <bpmn:incoming>Flow_0fyvyxk</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:boundaryEvent id="Event_01me1b4" name="Throw Fraud" attachedToRef="Fraud_Detection_Agent">
      <bpmn:outgoing>Flow_0udscr6</bpmn:outgoing>
      <bpmn:escalationEventDefinition id="EscalationEventDefinition_12tppbv" escalationRef="Escalation_3eekq60" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1dqcrtw" name="Yes" sourceRef="Gateway_0y12zon" targetRef="Activity_1ow5ai9">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=finalCheck = "yes"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_14fd7ee" sourceRef="Fraud_Detection_Agent" targetRef="Activity_19avfq6" />
    <bpmn:sequenceFlow id="Flow_0zcblag" sourceRef="Gateway_0cttbk8" targetRef="Fraud_Detection_Agent" />
    <bpmn:serviceTask id="Activity_19avfq6" name="Run Final Check on Result" zeebe:modelerTemplate="io.camunda.connectors.agenticai.aiagent.v1" zeebe:modelerTemplateVersion="6" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNBNTZFRkYiLz4KPG1hc2sgaWQ9InBhdGgtMi1vdXRzaWRlLTFfMTg1XzYiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjQiIHk9IjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iYmxhY2siPgo8cmVjdCBmaWxsPSJ3aGl0ZSIgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIvPgo8L21hc2s+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIgZmlsbD0id2hpdGUiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4wMTA1IDEyLjA5ODdDMTguNDkgMTAuNTg5NCAxNy4xNTk0IDguMTA4MTQgMTYuMTc5OSA2LjAxMTAzQzE2LjE1MiA2LjAwNDUxIDE2LjExNzYgNiAxNi4wNzk0IDZDMTYuMDQxMSA2IDE2LjAwNjYgNi4wMDQ1MSAxNS45Nzg4IDYuMDExMDRDMTQuOTk5NCA4LjEwODE0IDEzLjY2OTcgMTAuNTg4OSAxMi4xNDgxIDEyLjA5ODFDMTAuNjI2OSAxMy42MDcxIDguMTI1NjggMTQuOTI2NCA2LjAxMTU3IDE1Ljg5ODFDNi4wMDQ3NCAxNS45MjYxIDYgMTUuOTYxMSA2IDE2QzYgMTYuMDM4NyA2LjAwNDY4IDE2LjA3MzYgNi4wMTE0NCAxNi4xMDE0QzguMTI1MTkgMTcuMDcyOSAxMC42MjYyIDE4LjM5MTkgMTIuMTQ3NyAxOS45MDE2QzEzLjY2OTcgMjEuNDEwNyAxNC45OTk2IDIzLjg5MiAxNS45NzkxIDI1Ljk4OUMxNi4wMDY4IDI1Ljk5NTYgMTYuMDQxMSAyNiAxNi4wNzkzIDI2QzE2LjExNzUgMjYgMTYuMTUxOSAyNS45OTU0IDE2LjE3OTYgMjUuOTg5QzE3LjE1OTEgMjMuODkyIDE4LjQ4ODggMjEuNDExIDIwLjAwOTkgMTkuOTAyMU0yMC4wMDk5IDE5LjkwMjFDMjEuNTI1MyAxOC4zOTg3IDIzLjk0NjUgMTcuMDY2OSAyNS45OTE1IDE2LjA4MjRDMjUuOTk2NSAxNi4wNTkzIDI2IDE2LjAzMSAyNiAxNS45OTk3QzI2IDE1Ljk2ODQgMjUuOTk2NSAxNS45NDAzIDI1Ljk5MTUgMTUuOTE3MUMyMy45NDc0IDE0LjkzMjcgMjEuNTI1OSAxMy42MDEgMjAuMDEwNSAxMi4wOTg3IiBzdHJva2U9IiM0OTFEOEIiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgbWFzaz0idXJsKCNwYXRoLTItb3V0c2lkZS0xXzE4NV82KSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda.agenticai:aiagent:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="bedrock" target="provider.type" />
          <zeebe:input source="eu-central-1" target="provider.bedrock.region" />
          <zeebe:input source="credentials" target="provider.bedrock.authentication.type" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_ACCESS_KEY}}" target="provider.bedrock.authentication.accessKey" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_SECRET_KEY}}" target="provider.bedrock.authentication.secretKey" />
          <zeebe:input source="eu.anthropic.claude-sonnet-4-5-20250929-v1:0" target="provider.bedrock.model.model" />
          <zeebe:input source="=0.2" target="provider.bedrock.model.parameters.temperature" />
          <zeebe:input source="=&#34;You are verifying the decision of a fraud detection process based on a tax submission. You will receive a conversation history with another model as input and need to decide if you agree with this submission being valid. &#10;&#10;If you decide the submission is no fraud, simply answer with &#39;yes&#39; (no quotes, tags or other text).&#10;&#10;If you think it can still be fraud, answer with your suggestion in &#60;fraudVerification&#62;&#60;/fraudVerification&#62; tags.&#34;" target="data.systemPrompt.prompt" />
          <zeebe:input source="=&#34;&#60;history&#62;&#34; + string(agent.context.conversation.messages) + &#34;&#60;/history&#62;&#34;" target="data.userPrompt.prompt" />
          <zeebe:input source="=judgeAgent.context" target="data.context" />
          <zeebe:input source="in-process" target="data.memory.storage.type" />
          <zeebe:input source="=20" target="data.memory.contextWindowSize" />
          <zeebe:input source="=10" target="data.limits.maxModelCalls" />
          <zeebe:input source="text" target="data.response.format.type" />
          <zeebe:input source="=false" target="data.response.format.parseJson" />
          <zeebe:input source="=false" target="data.response.includeAssistantMessage" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="6" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.agenticai.aiagent.v1" />
          <zeebe:header key="resultVariable" value="judgeAgent" />
          <zeebe:header key="resultExpression" value="={&#10;  finalCheck: responseText&#10;}" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_14fd7ee</bpmn:incoming>
      <bpmn:outgoing>Flow_0nriff3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:task id="Activity_1ow5ai9" name="Accept tax submission">
      <bpmn:incoming>Flow_1dqcrtw</bpmn:incoming>
      <bpmn:outgoing>Flow_0fyvyxk</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0fyvyxk" sourceRef="Activity_1ow5ai9" targetRef="Event_0vgcvn8" />
    <bpmn:task id="Activity_0o48wy2" name="Report fraud detection">
      <bpmn:incoming>Flow_0udscr6</bpmn:incoming>
      <bpmn:outgoing>Flow_1b97szc</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1b97szc" sourceRef="Activity_0o48wy2" targetRef="Event_1sxkleb" />
    <bpmn:boundaryEvent id="Event_11x88af" name="30 Days" attachedToRef="Fraud_Detection_Agent">
      <bpmn:outgoing>Flow_1qqae51</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1x0yypo">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P30D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:task id="Activity_1v3jq4d" name="Escalate to advisor">
      <bpmn:incoming>Flow_1qqae51</bpmn:incoming>
      <bpmn:outgoing>Flow_18jne98</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1qqae51" sourceRef="Event_11x88af" targetRef="Activity_1v3jq4d" />
    <bpmn:endEvent id="Event_09kua1m" name="Tax submission escalated">
      <bpmn:incoming>Flow_18jne98</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_18jne98" sourceRef="Activity_1v3jq4d" targetRef="Event_09kua1m" />
    <bpmn:textAnnotation id="TextAnnotation_0ch3sx4">
      <bpmn:text>LLM as a judge</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0lga9ob" associationDirection="None" sourceRef="TextAnnotation_0ch3sx4" targetRef="Activity_19avfq6" />
  </bpmn:process>
  <bpmn:escalation id="Escalation_3eekq60" name="FraudDetected" escalationCode="FraudDetected" />
  <bpmn:error id="Error_1vkip6r" name="Fraud Error" errorCode="Fraud_Error" />
  <bpmn:message id="Message_10q7s3s" name="ba04712f-eae7-433a-9dd4-c56286e65940" zeebe:modelerTemplate="io.camunda.connectors.inbound.EmailIntermediate.v1">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=emailSent.messageId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="fraud-detection-process">
      <bpmndi:BPMNShape id="Activity_1irm6ln_di" bpmnElement="Activity_19avfq6">
        <dc:Bounds x="920" y="198" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ow5ai9_di" bpmnElement="Activity_1ow5ai9">
        <dc:Bounds x="1210" y="198" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0vgcvn8_di" bpmnElement="Event_0vgcvn8">
        <dc:Bounds x="1392" y="220" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1388" y="263" width="46" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1v3jq4d_di" bpmnElement="Activity_1v3jq4d">
        <dc:Bounds x="440" y="700" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0o48wy2_di" bpmnElement="Activity_0o48wy2">
        <dc:Bounds x="720" y="700" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1sxkleb_di" bpmnElement="Event_1sxkleb">
        <dc:Bounds x="752" y="832" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="727" y="878" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_09kua1m_di" bpmnElement="Event_09kua1m">
        <dc:Bounds x="472" y="832" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="452" y="875" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_158b240_di" bpmnElement="Fraud_Detection_Agent" isExpanded="true">
        <dc:Bounds x="380" y="200" width="480" height="420" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1rk6e27_di" bpmnElement="CallOnExternalAdvisor">
        <dc:Bounds x="440" y="360" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_04sl072_di" bpmnElement="Gateway_04sl072" isMarkerVisible="true">
        <dc:Bounds x="615" y="375" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="615" y="345" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ut60ps_di" bpmnElement="Event_0ut60ps">
        <dc:Bounds x="742" y="382" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="736" y="425" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vf3i1y_di" bpmnElement="Event_0gnk722">
        <dc:Bounds x="622" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="609" y="565" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0wc5jkj_di" bpmnElement="FraudDetected">
        <dc:Bounds x="440" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0mzmr76_di" bpmnElement="Activity_1yge9uw">
        <dc:Bounds x="440" y="240" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0tqypvl_di" bpmnElement="Event_1gwy74w">
        <dc:Bounds x="622" y="262" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="604" y="305" width="72" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_02dr109_di" bpmnElement="Flow_02dr109">
        <di:waypoint x="540" y="400" />
        <di:waypoint x="615" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1y3onm8_di" bpmnElement="Flow_1y3onm8">
        <di:waypoint x="665" y="400" />
        <di:waypoint x="742" y="400" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="696" y="382" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ex155v_di" bpmnElement="Flow_1ex155v">
        <di:waypoint x="640" y="425" />
        <di:waypoint x="640" y="522" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="646" y="471" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16beu1m_di" bpmnElement="Flow_16beu1m">
        <di:waypoint x="540" y="540" />
        <di:waypoint x="622" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uz92it_di" bpmnElement="Flow_0uz92it">
        <di:waypoint x="540" y="280" />
        <di:waypoint x="622" y="280" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Gateway_0y12zon_di" bpmnElement="Gateway_0y12zon" isMarkerVisible="true">
        <dc:Bounds x="1075" y="213" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1060" y="270" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="172" y="220" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="153" y="263" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0cttbk8_di" bpmnElement="Gateway_0cttbk8" isMarkerVisible="true">
        <dc:Bounds x="255" y="213" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_0lga9ob_di" bpmnElement="Association_0lga9ob">
        <di:waypoint x="974" y="156" />
        <di:waypoint x="971" y="198" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0gvn82i_di" bpmnElement="Event_01me1b4">
        <dc:Bounds x="752" y="602" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="788" y="633" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_01uyrpo_di" bpmnElement="Event_11x88af">
        <dc:Bounds x="472" y="602" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="470" y="645" width="41" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0ifqrnr_di" bpmnElement="Flow_0ifqrnr">
        <di:waypoint x="208" y="238" />
        <di:waypoint x="255" y="238" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nriff3_di" bpmnElement="Flow_0nriff3">
        <di:waypoint x="1020" y="238" />
        <di:waypoint x="1075" y="238" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0udscr6_di" bpmnElement="Flow_0udscr6">
        <di:waypoint x="770" y="638" />
        <di:waypoint x="770" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yea5o1_di" bpmnElement="Flow_1yea5o1">
        <di:waypoint x="1100" y="213" />
        <di:waypoint x="1100" y="110" />
        <di:waypoint x="280" y="110" />
        <di:waypoint x="280" y="213" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1132" y="174" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dqcrtw_di" bpmnElement="Flow_1dqcrtw">
        <di:waypoint x="1125" y="238" />
        <di:waypoint x="1210" y="238" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1167" y="220" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14fd7ee_di" bpmnElement="Flow_14fd7ee">
        <di:waypoint x="860" y="238" />
        <di:waypoint x="920" y="238" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0zcblag_di" bpmnElement="Flow_0zcblag">
        <di:waypoint x="305" y="238" />
        <di:waypoint x="380" y="238" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fyvyxk_di" bpmnElement="Flow_0fyvyxk">
        <di:waypoint x="1310" y="238" />
        <di:waypoint x="1392" y="238" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1b97szc_di" bpmnElement="Flow_1b97szc">
        <di:waypoint x="770" y="780" />
        <di:waypoint x="770" y="832" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_0ch3sx4_di" bpmnElement="TextAnnotation_0ch3sx4">
        <dc:Bounds x="920" y="130" width="100" height="26" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1qqae51_di" bpmnElement="Flow_1qqae51">
        <di:waypoint x="490" y="638" />
        <di:waypoint x="490" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18jne98_di" bpmnElement="Flow_18jne98">
        <di:waypoint x="490" y="780" />
        <di:waypoint x="490" y="832" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
